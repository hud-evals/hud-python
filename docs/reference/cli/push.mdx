---
title: "hud push"
description: "Share HUD environments to Docker and HUD registries"
icon: "upload"
---

The `hud push` command publishes your environment image to a Docker registry and uploads metadata to the HUD registry.

## Usage

```bash
hud push [DIRECTORY] [OPTIONS]
```

## Arguments

<ParamField path="directory" type="string" default=".">
  Environment directory containing hud.lock.yaml
</ParamField>

## Options

<ParamField path="--image" type="string">
  Override registry image name (e.g., `myorg/myenv`). Short: `-i`
</ParamField>

<ParamField path="--tag" type="string">
  Override tag (e.g., `v1.0`, `latest`). Short: `-t`
</ParamField>

<ParamField path="--sign" type="boolean" default="false">
  Sign the image with cosign (not yet implemented)
</ParamField>

<ParamField path="--yes" type="boolean" default="false">
  Skip confirmation prompts. Short: `-y`
</ParamField>

<ParamField path="--verbose" type="boolean" default="false">
  Show detailed output. Short: `-v`
</ParamField>

## Prerequisites

<Warning>
Requires `HUD_API_KEY`:
```bash
export HUD_API_KEY="your-api-key"
```
</Warning>

<Note>
Login to your Docker registry first (e.g., Docker Hub or GHCR):
```bash
docker login
# or
docker login ghcr.io
```
</Note>

## What It Does

<Steps>
<Step title="Verify Build">
Ensures a recent `hud build` exists (lock file present), prompting to build if missing.
</Step>

<Step title="Choose Target">
Determines target image:
- `--image` if provided
- Else auto-detects Docker Hub username and uses `username/{name}:{tag}`
- Tag uses `--tag`, or the lock’s internal `build.version`, else current tag
</Step>

<Step title="Push Image">
Tags and pushes via Docker; captures pushed digest.
</Step>

<Step title="Update Lock">
Updates `hud.lock.yaml` with:
- `image`: full registry reference with digest
- `push`: `source`, `pushedAt`, `registry`, and `image_with_tag`
</Step>

<Step title="Upload Metadata">
Uploads lock metadata to the HUD registry path `.../registry/envs/{org}/{name}:{tag}`.
</Step>
</Steps>

## Registry Detection

1) Explicit `--image` → used as‑is.
2) Docker config → reads logged‑in username (Docker Hub).
3) Default → prompts if no login and `--image` missing.

## Examples

```bash
# Basic (auto username)
hud push

# Custom registry and tag
hud push . --image ghcr.io/myorg/myenv --tag v1.0.0

# Non‑interactive (CI)
hud push . --yes --tag "prod-$(date +%Y%m%d)"
```

## Lock File After Push

```yaml
image: "myorg/myenv:latest@sha256:..."
push:
  source: "my-env:dev@sha256:..."
  pushedAt: "2025-01-01T11:00:00Z"
  registry: "ghcr.io"
  image_with_tag: "myorg/myenv:latest"
```

## Notes

- If HUD registry upload fails, the Docker push still succeeds; you can share `hud.lock.yaml` manually.
- Image names must include `org/name` for HUD registry uploads.

## See Also

- [`hud build`](/reference/cli/build)
- [`hud pull`](/reference/cli/pull)
- [`hud analyze`](/reference/cli/analyze)
- [Build Environments](/build-environments) - Getting started with HUD environments
